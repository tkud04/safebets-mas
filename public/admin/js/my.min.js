$(function() {
    "use strict";
	hideScoreLineInput();
        $('.add-scoreline-btn').on("click", function() {
            $(this).hide();
			var td = $(this).parent();
			showScoreLineInput(td);
        });
		
		$('.ft-s-btn').on("click", function() {
			var td = $(this).parent();
            var val = $(td).find('.ft-s').val();
			
			var pid = $(td).find('.dip').val();
			var urlx = $('#urlx').val();
	        var dt = {'pid':pid,'sc':val};		
			addScoreLine(urlx,dt,td);
			});
});


function addScoreLine(url,data,td){
	$.ajax({   
   type : 'GET',
   url  : url,
   data : data,
   beforeSend: function()
   { 
    $("#error").fadeOut();
    $("#result").fadeOut();
    $("#working").html('<br><br><div class="alert alert-info" role="alert" style=" text-align: center;"><strong class="block" style="font-weight: bold;">  <i class = "fa fa-spinner fa-2x slow-spin"></i>  Connecting.... </strong></div>');
	$('#working').fadeIn();
   },
   success :  function(response)
      {         
       $('#working').html("");	   
       $('#working').fadeOut();	   
       //$('#result').html(response);
       var ret = JSON.parse(response);	   
	   if(ret['status'] == "error"){}
	   else{
			 hideScoreLineInput();
			 alert("Scoreline updated. Please refresh to view changes or click OK to continue.");			 
	   }       
     
     }
   });	
}


function hideScoreLineInput(){
    $('.ft-s').hide();
    $('.ft-s-btn').hide();
}

function showScoreLineInput(td){
    $(td).find('.ft-s').show();
    $(td).find('.ft-s-btn').show();
	
}